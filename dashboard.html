<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korpost ‚Äì Dashboard</title>

    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #content { display: none; }
        #loading { font-size: 18px; }
        .card {
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        button {
            padding: 10px 16px;
            cursor: pointer;
            border-radius: 6px;
            border: none;
            background: #007bff;
            color: white;
        }
    </style>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBQLN3TI5pdzCnJ38YOAVBI-MG23ftdOeA",
            authDomain: "korpost-40bad.firebaseapp.com",
            projectId: "korpost-40bad",
            storageBucket: "korpost-40bad.firebasestorage.app",
            messagingSenderId: "571469681924",
            appId: "1:571469681924:web:7a61fad0455ec94836ec51"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const content = document.getElementById("content");
        const loading = document.getElementById("loading");

        onAuthStateChanged(auth, (user) => {
            if (!user) {
                window.location.href = "login.html";
                return;
            }

            document.getElementById("user-email").textContent = user.email;
            loading.style.display = "none";
            content.style.display = "block";
        });

        async function logout() {
            await signOut(auth);
            window.location.href = "login.html";
        }

        window.logout = logout;
    </script>
</head>
<body>
    <!-- NAVIGATION START -->
<style>
    /* Hintergrundoverlay */
    .nav-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.4);
        backdrop-filter: blur(2px);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
        z-index: 900;
    }

    .nav-overlay.open {
        opacity: 1;
        pointer-events: all;
    }

    /* Hamburger */
    .nav-container {
        position: fixed;
        top: 15px;
        right: 15px;
        z-index: 1100;
    }

    .nav-toggle {
        font-size: 34px;
        cursor: pointer;
        user-select: none;
        color: #333;
    }

    /* Panel */
    .nav-menu {
        position: fixed;
        top: 0;
        right: -320px;    /* geschlossen */
        width: 280px;
        max-width: 80%;
        height: 100%;
        background: #ffffff;
        box-shadow: -3px 0 8px rgba(0,0,0,0.2);
        padding: 25px;
        transition: right 0.3s ease;
        z-index: 1000;
    }

    .nav-menu.open {
        right: 0;        /* offen */
    }

    /* Links */
    .nav-menu a, 
    .nav-menu button {
        display: block;
        font-size: 20px;
        text-decoration: none;
        color: #222;
        margin: 18px 0;
        border: none;
        background: none;
        cursor: pointer;
        width: 100%;
        text-align: left;
    }

    .nav-menu a:hover,
    .nav-menu button:hover {
        color: #444;
    }

    /* Desktop-Optimierung */
    @media (min-width: 900px) {
        .nav-toggle {
            font-size: 32px;
        }
        .nav-menu {
            width: 300px;
        }
    }
</style>

<!-- Overlay -->
<div id="navOverlay" class="nav-overlay" onclick="closeMenu()"></div>

<!-- Hamburger Icon -->
<div class="nav-container">
    <span class="nav-toggle" onclick="toggleMenu()">‚ò∞</span>
</div>

<!-- Men√º -->
<div id="navMenu" class="nav-menu">
    <h3>üì¨ Korpost</h3>
    <hr>

    <a href="dashboard.html">üè† Dashboard</a>
    <a href="profil.html">üë§ Profil</a>
    <button onclick="logout()">üö™ Logout</button>
</div>

<script>
    function toggleMenu() {
        document.getElementById("navMenu").classList.toggle("open");
        document.getElementById("navOverlay").classList.toggle("open");
    }

    function closeMenu() {
        document.getElementById("navMenu").classList.remove("open");
        document.getElementById("navOverlay").classList.remove("open");
    }
</script>
<!-- NAVIGATION END -->

    <div id="loading">Lade Dashboard‚Ä¶</div>

    <div id="content">
        <h2>Willkommen bei Korpost!</h2>

        <p>Eingeloggt als: <span id="user-email"></span></p>
        <button onclick="logout()">Logout</button>

        <hr>

        <div class="card">
            <h3>Postkarte anfordern</h3>
            <p>Fordere eine Adresse an, an die du eine Korpost-Postkarte senden wirst.</p>
            <button disabled>Funktion folgt</button>
        </div>

        <div class="card">
            <h3>Verbindung verwalten</h3>
            <p>Lege deine Verbindung fest oder registriere deine Aktivitas.</p>
            <button disabled>Funktion folgt</button>
        </div>

        <div class="card">
            <h3>Profil</h3>
            <p>Bearbeite deine pers√∂nlichen Angaben und Einstellungen.</p>
           <button onclick="window.location.href='profil.html'"> Profil bearbeiten </button>
        </div>
    </div>
</body>
</html>
